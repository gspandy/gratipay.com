<div class="col1">

    <!-- Statement -->
    <div class="statement js-edit">
        <h2>{{ _("Statement") }}
            <button class="edit">{{ _("Edit") }}</button>
        </h2>

        <form class="edit" action="statement.json">
            <p>{{ _("Tell us how you're making the world better.") }}</p>

            {{ _("Gratipay allows you to have profile statements in multiple languages. "
                 "Use the selector below to switch between them.") }}<br>
            <select class="langs" name="lang">
            {% for code, name in select_langs.items() %}
                <option value="{{ code }}"
                        {{ 'selected' if code == stmt_lang }}
                        {{ 'disabled' if not code }}
                    >{{ name }}</option>
            {% endfor %}
            </select>
            <textarea name="content" rows="15" placeholder="{{ stmt_placeholder|e }}"
                      data-confirm-discard="{{ confirm_discard|e }}"></textarea>
            <p class="help">{{ _("Markdown supported.") }}
                <a href="https://daringfireball.net/projects/markdown/basics" target="_blank">{{ _("What is markdown?") }}</a>
                (<a href="https://github.com/gratipay/gratipay.com/tree/master/gratipay/utils/markdown.py" target="_blank">{{ _("View source.") }}</a>)
            </p>
            <button class="save">{{ _("Save") }}</button>
            <button class="cancel">{{ _("Cancel") }}</button>
        </form>

        <div class="view markdown-output">
            {{ markdown.render(statement) if statement }}
        </div>
    </div>
</div>
<div class="col2">

    <!-- Funding Goal -->
    <div class="goal js-edit">
        <h2>{{ _("Funding Goal") }}
            <button tabindex="400" class="edit">{{ _("Edit") }}</button>
        </h2>
        <div class="view">
            {% if user.participant.goal > 0 %}
            {{ GOAL }}
            {% elif user.participant.goal == 0 %}
            {{ PATRON }}
            {% elif user.participant.goal == None %}
            {{ GRATEFUL }}
            {% else %}
            {{ PATRON_NO_GOAL }}
            {% endif %}
        </div>
        <form class="edit" action="goal.json">
            <input type="radio" name="goal" id="goal-yes" value="custom"
            {% if user.participant.goal > 0 %} checked="true"{% endif %}/>
            <label for="goal-yes">{{ GOAL_PARTS[0] }}$</label><input
                name="goal_custom" id="goal-custom"
            {% if (user.participant.goal == None) or (user.participant.goal <= 0) %}
            {% else %}
            value="{{ format_decimal(user.participant.goal) }}"
            {% endif %} />
            <label for="goal-yes">{{ GOAL_PARTS[1] }}</label>

            <br />

            <input type="radio" name="goal" id="goal-null" value="null"
            {% if user.participant.goal == None %} checked="true"{% endif %}/>
            <label for="goal-null">{{ GRATEFUL }}</label>

            <br />

            <input type="radio" name="goal" id="goal-0" value="0.00"
            {% if user.participant.goal == 0 %} checked="true"{% endif %}/>
            <label for="goal-0">{{ PATRON }}</label>

            <br />

            <input type="radio" name="goal" id="goal-negative" value="-1"
            {% if (user.participant.goal != None) and user.participant.goal < 0 %} checked="true"{% endif %}/>
            <label for="goal-negative">{{ PATRON_NO_GIFTS }}</label>

            <br /><br />

            <button class="save">{{ _("Save") }}</button>
            <button class="cancel">{{ _("Cancel") }}</button>
        </form>
    </div>

    {% include "templates/charts-for-user.html" %}

    <!-- Memberships -->
    {% include "templates/team-listing.html" %}
    {% include "templates/community-listing.html" %}
    {% if not communities %}
    {#
        Still show the communities heading in this case. Otherwise it's set in
        community-listing.html. See https://github.com/gratipay/gratipay.com/pull/1916.
    #}
    <h2>{{ _("Communities") }}</h2>
    {% endif %}
    <a href="/for/">{{ _("Join Communities") }}</a>

    <!-- Connected Accounts -->
    {% include "templates/connected-accounts.html" %}

</div>
<div class="clear"></div>

{% if participant.receiving > 0 %}
{% set tip_distribution = participant.get_tip_distribution()[0] %}
<div class="col1">
    <h2>{{ _("Tips Received, by Number of Tips") }}</h2>
    {% include "templates/tip-distribution.html" %}
</div>

<div class="col2">
    <h2>{{ _("Tips Received, by Dollar Amount") }}</h2>
    <table class="tip-distribution">
        {% for amount, ncontributors, summed, pcontributors, psummed in tip_distribution %}
        <tr>
            <td class="dollar-sign">$</td>
            <td class="amount">{{ amount }}</td>
            <td colspan="2"></td>
            <td class="count">
                <span class="green bar" style="width: {{ psummed * 240 }}pt"></span>
                {{ "%5.1f" % (psummed * 100) }}%
                <span class="number">(${{ summed }})</span>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endif %}
